<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>指南 Windows 下 GitHub Pages 本地调试 | Honghzh</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="指南 Windows 下 GitHub Pages 本地调试" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="本文将带你以 Jekyll 英文文档为起点，延伸探索、集齐龙珠，实现实时预览的 GitHub Pages 写作体验。" />
<meta property="og:description" content="本文将带你以 Jekyll 英文文档为起点，延伸探索、集齐龙珠，实现实时预览的 GitHub Pages 写作体验。" />
<link rel="canonical" href="https://honghzh.github.io/guidance/github-pages/gihub-pages-guidance02" />
<meta property="og:url" content="https://honghzh.github.io/guidance/github-pages/gihub-pages-guidance02" />
<meta property="og:site_name" content="Honghzh" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-27T02:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"description":"本文将带你以 Jekyll 英文文档为起点，延伸探索、集齐龙珠，实现实时预览的 GitHub Pages 写作体验。","@type":"BlogPosting","url":"https://honghzh.github.io/guidance/github-pages/gihub-pages-guidance02","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://honghzh.github.io/assets/images/example-image.png"}},"headline":"指南 Windows 下 GitHub Pages 本地调试","dateModified":"2018-03-27T02:00:00+08:00","datePublished":"2018-03-27T02:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://honghzh.github.io/guidance/github-pages/gihub-pages-guidance02"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,600">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="alternate" type="application/rss+xml" title="Honghzh" href="https://honghzh.github.io/feed.xml">

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Honghzh</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
            <a class="page-link" href="/about/">关于</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">指南 | Windows 下 GitHub Pages 本地调试</h1>
    <ul class="category">
  <li class="category__label">Categories: </li>
  
    <li class="category__item"><a href="https://honghzh.github.io/category/guidance" title="guidance">guidance</a></li>
  
    <li class="category__item"><a href="https://honghzh.github.io/category/github-pages" title="github-pages">github-pages</a></li>
  
</ul>
    <p class="post-meta"><time datetime="2018-03-27T02:00:00+08:00" itemprop="datePublished">Mar 27, 2018</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>本文将带你以 Jekyll 英文文档为起点，延伸探索、集齐龙珠，实现<strong>实时预览</strong>的 GitHub Pages 写作体验。</p>

<h1 id="前言">前言</h1>

<p>实际上，用 GitHub Pages 写文章，我们只需要下载模板、修改模板、推送到 GitHub ，三步就能实现（从<a href="/guidance/github-pages/gihub-pages-guidance01">上一篇</a>容易体会）。然而，每次修改模板后都需要推送到 GitHub 上才能看到自己编辑的效果。</p>

<p>有没有方法可以在本地浏览器上直接看到自己编辑的效果，只要有微小改动，保存后轻点刷新，就能看到最新的预览呢？</p>

<p><a href="/guidance/github-pages/gihub-pages-guidance01">上一篇</a>我们跳过了 Jekyll 大部分文档，直接下载主题模板，为了解决这个问题，我们不得不重新打开 <a href="https://jekyllrb.com/docs/quickstart/">Jekyll 文档</a>，研究 Jekyll 的些许运行原理了。</p>

<h1 id="在-jekyll-文档">在 Jekyll 文档</h1>

<p>打开 <a href="https://jekyllrb.com/docs/quickstart/">Jekyll 英文文档</a>，Quick-start guide 第一行写着（注意粗体即可）：</p>

<p><strong>If</strong> you already have a full <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a> development environment with all headers and RubyGems installed (see Jekyll’s requirements), <strong>you can</strong> create a new Jekyll site by doing the following:…</p>

<p>If…you can…，原来，若想要在自己本机上运行一个使用了 Jekyll 的网站，我们只需达成 If 中的两个<strong>前提条件</strong>：</p>

<ol>
  <li>你的电脑要能看得懂 Ruby 语言</li>
  <li>还需要名为 RubyGems 的工具</li>
</ol>

<p>很棒，只需要两个条件，接下来我们一一满足它们就好了。</p>

<h1 id="第一个条件让你的电脑看懂-ruby-语言">第一个条件：让你的电脑看懂 Ruby 语言</h1>

<p>我们的电脑在被主人买回家的时候，虽然已经自学了很多语言，但是委实没有学过 Ruby 。</p>

<p>也就是说，当它的主人（也就是你）用 Ruby 语言跟它说话时，它完全听不懂你想让它做什么。</p>

<p><strong>显然，它需要一个翻译。</strong></p>

<p>这位 Ruby 语翻译先生，在计算机世界就叫做 <em>Ruby 解释器</em> ，刚刚 <a href="https://jekyllrb.com/docs/quickstart/">Jekyll 英文文档</a>很贴心地在 “Ruby” 字样上设置了超链接，点击 <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a> ，我们进入了 <em>Ruby 解释器</em> 官网的英文下载页面。</p>

<p>页面中，看到小标题 Ways of Installing Ruby：</p>

<blockquote>
  <p><strong>Ways of Installing Ruby</strong></p>

  <p>We have several tools on each major platform to install Ruby:</p>

  <ul>
    <li>On Linux/UNIX, …</li>
    <li>On OS X machines, …</li>
    <li><strong>On Windows machines, you can use <a href="https://rubyinstaller.org/">RubyInstaller</a>.</strong></li>
  </ul>
</blockquote>

<p>根据不同的操作系统，有不同的方法安装解释器，在 Windows 下推荐使用 RubyInstaller，于是，我们点进 <a href="https://rubyinstaller.org/">RubyInstaller 官网</a>，点击大红色的 Download ，进入下载页面选择版本。</p>

<p>我们要选择 GitHub Pages 依赖的那个 ruby 版本，百度”GitHub Pages dependence”找到<a href="https://pages.github.com/versions/">GitHub Pages 依赖版本说明</a>，我们可以知道 <em>Ruby 2.4.3-2</em> 是我们需要安装的版本。</p>

<h3 id="安装-msys2-集成">安装 MSYS2 集成</h3>

<p>目前看起来一切太平，但接下来的步骤就有不少需要注意的点，一不留神就会报错失败，现在让我们步步为营，继续安装这个 Ruby 解释器。</p>

<p>在安装的最后一步，RubyInstaller 会询问你：是否执行 <em>ridk install</em> 命令以安装 MSYS2 ？这是什么？捆绑软件吗？</p>

<p>别冲动，让我们回到 <a href="https://rubyinstaller.org/">RubyInstaller 下载页面</a>找线索，在官网右侧找到了 MSYS2，注意下面粗体和斜体部分：</p>

<p>Starting with Ruby 2.4.0 we use the <strong>MSYS2 toolkit</strong> as our development kit. It is <strong>required</strong> to <em>build native C/C++ extensions for Ruby</em> and is necessary for Ruby on Rails.</p>

<p>原来，MSYS2 是一个拓展工具（extensions），而且是 <strong>required</strong>。有了它，这位 Ruby 翻译就可以额外翻译一些 Windows 听不懂的 Linux 命令。</p>

<blockquote>
  <p><strong>如果现在没有安装 MSYS2 的全部集成的话，最后一步安装 Jekyll 就会报错失败</strong>：</p>

  <p>“无法识别 <em>make</em> 命令”</p>

  <p>因为<em>make</em> 是写在 Jekyll 安装代码中的 Linux 系统命令。如果没有 MSYS2 的翻译拓展，Windows 将完全不懂那条命令想要它干啥。</p>
</blockquote>

<p>于是我们勾选安装 MSYS2，会弹出一个命令行界面，询问你想安装 MSYS2 的哪一部分。先输入1，安装 MSYS2 核心文件。</p>

<h4 id="1--安装-msys2-核心">1 : 安装 MSYS2 核心</h4>

<p>输入1回车后，系统会提示在指定目录找不到安装包。提示信息让我们去访问 <a href="http://www.msys2.org/">MSYS2 的下载地址</a>，选择第一个i186版本下载，并下载到特定的文件夹中（根据提示耐心寻找，除了”user”可能指”用户”文件夹外，其余应一模一样）。</p>

<p><strong>在命令行界面程序运行的任何时候，你都可以连按两次 ctrl+C 终止任务。</strong></p>

<p>下载好后回车，若安装未继续，则退出程序后重新在命令行里输入 <em>ridk install</em> ，按 1 ，等待核心安装完成。</p>

<h4 id="23--安装-mysys2-剩余组件">2、3 : 安装 MYSYS2 剩余组件</h4>

<p>核心安装完成后，还需要安装 MYSYS2 的剩余组件。</p>

<blockquote>
  <p>安装 MYSYS2 的剩余组件将使我们的系统能够把等下 Jekyll 安装包中的 Linux 命令解读成它看得懂的语言，最终才能顺利安装。</p>

  <p>MYSYS2 剩余的组件默认下载源是国外服务器，因为众所周知的原因<strong>速度奇慢</strong>，因此我们要先把 MYSYS2 的默认下载源改成国内的清华大学镜像源。</p>
</blockquote>

<p>现在，访问<a href="https://mirrors.tuna.tsinghua.edu.cn/help/msys2/"> MYSYS2 清华大学镜像</a>，并打开本地 MYSYS2 的根目录，按照网页中 <strong>pacman 的配置</strong> 这一节修改相应三个配置文件即可。</p>

<p>接着，命令行中再次输入 <em>ridk install</em> ，依次输入 2 和 3 ，即可自动安装 MYSYS2 剩余组件。</p>

<h3 id="看得懂-ruby-语言了">看得懂 Ruby 语言了</h3>

<p>在命令行中执行 <em>ruby -v</em> ，看到版本号说明 Ruby 解释器安装成功，你的电脑现在看得懂 Ruby 语言了（这对接下来的安装很关键）~</p>

<h1 id="第二个条件安装-rubygems">第二个条件：安装 RubyGems</h1>

<p>回到 <a href="https://jekyllrb.com/docs/quickstart/">Jekyll 文档</a>，第二个条件是安装 RubyGems 。于是我们进入 <a href="https://rubygems.org/pages/download">RubyGems 下载页面</a>，按照其中的指引，很简单，三步完成安装：</p>

<ol>
  <li>点击下载 ZIP 文件，解压到你想安装 RubyGems 的目录</li>
  <li>进入解压后的文件夹根目录</li>
  <li>按住 Shift 并单击鼠标右键，选择”在此处打开命令窗口”，命令行执行 <em>ruby setup.rb</em> ，安装完成。</li>
</ol>

<p>RubyGems 是一个包管理工具（类似于 Ruby 语言世界中的”软件管家”），可以安装或卸载各种用 Ruby 语言写成的工具，其中就包括强大的网页生成器 —— 我们已经很眼熟的 Jekyll 。下一步就是<strong>使用 RubyGems 安装 Jekyll 包</strong>，就能在本地运行 Jekyll 网页，实现本地预览了。</p>

<h1 id="使用-rubygems-安装-jekyll-包">使用 RubyGems 安装 Jekyll 包</h1>

<p>所有前提条件已经达成，你的电脑拥有了解析 Ruby 语言的能力，又有了安装 Ruby 包的管理工具。现在只需用 RubyGems 把 Jekyll 安装到本地，就可以用本地的 Jekyll 构建实时预览网页了。</p>

<p>通过阅读 <a href="https://jekyllrb.com/docs/installation/">Jekyll 文档-安装</a>和修改 RubyGems 默认下载源的教程，得到科学的安装步骤如下：</p>

<ol>
  <li>
    <p><strong>修改 RubyGems 的默认下载源</strong>（否则下载速度奇慢）</p>

    <p>在网站文件夹的根目录打开命令窗口（可以按Shift后从右键菜单打开），依次执行：</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> gem sources –remove https://rubygems.org/
 gem sources -a http://gems.ruby-china.org
 gem sources -l
</code></pre></div>    </div>

    <p>对此的解释：
 第一行移除默认的国外下载源；
 第二行增加国内下载源；
 第三行查看现在的下载源，确保只有 <em>http://gems.ruby-china.org</em></p>
  </li>
  <li>
    <p><strong>安装 Jekyll 和 Bundler</strong></p>

    <p>命令行执行：</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> gem install jekyll bundler
</code></pre></div>    </div>

    <p>其中 bundler 是一个依赖同步工具，可以确保互相依赖的各个工具的版本相契合，方便使用 Jekyll。</p>
  </li>
  <li>
    <p><strong>本地运行你的网站</strong></p>

    <p>这一刻终于来了，现在我们在本地安装了 Jekyll，可以用它预览网站了</p>

    <p>在网站文件夹根目录下命令行执行：</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> bundle init
</code></pre></div>    </div>

    <p>这会在根目录下生成一个名为 <em>gemfile</em> 的文件，包管理工具 <strong>RubyGems 会读取这个文件，从而自动帮你安装（你下载的）网站模板所需要的额外插件</strong>。</p>

    <p>使用文本编辑器（比如 <a href="https://code.visualstudio.com/">VS Code</a>）编辑 <em>gemfile</em> 文件：</p>

    <ul>
      <li>
        <p>把 source 改成国内的 “http://gems.ruby-china.org”。</p>
      </li>
      <li>
        <p>在最下面增加几行，内容是 <em>gem “网站需要的插件名”</em>（在模板文档或 <em>_config.yml</em> 里有，如果模板自带了 <em>gemfile</em> 那么此处一般不需修改，只需修改 <em>source</em> ）</p>
      </li>
      <li>
        <p><em>git_source</em> 那行（若有）前面可以加 <em>#</em> 号注释掉。</p>
      </li>
    </ul>

    <p>改好后保存，继续在根目录命令行执行：</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> bundle update
</code></pre></div>    </div>

    <p>这会让 RubyGems 根据你的 <em>Gemfile</em> 文件安装所需依赖。</p>

    <p><strong>在网站文件夹根目录执行：</strong></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> jekyll serve
</code></pre></div>    </div>

    <p>并在浏览器地址栏中输入本机4000端口地址：<strong><em>localhost:4000</em></strong>即可。</p>
  </li>
</ol>

<h1 id="本地预览你的网站">本地预览你的网站</h1>

<p><strong>此后，每当需要本地预览时，在网站文件夹根目录执行：</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll serve
</code></pre></div></div>

<p>并在浏览器中输入本机4000端口地址：<strong><em>localhost:4000</em></strong>，就可以看到自己网站的本地预览了~</p>

<p>只要预览程序运行，刷新浏览器窗口就可以即时更新你的预览。在命令行窗口内连续两次 ctrl+C 可以退出预览。</p>

<p><strong>Futher more…（选读）</strong></p>

<p>你也获得了发布网站的另一种姿势：使用本地 Jekyll 引擎先编译网站文件夹，再把编译好的文件同步到 GitHub 仓库，本地编译网站只需一步：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll build
</code></pre></div></div>

<p>编译好的文件全部在根目录的 <em>_site</em> 文件夹里，将里面的所有文件拷贝到 GitHub 对应的本地网站仓库，右键 Git Bash Here 执行以下命令即可：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add .
git commit -m "自己定义提交信息"
git push origin master
</code></pre></div></div>

<p>至此，你已经可以灵活运用基于 GitHub Pages 搭建的个人网站了</p>

<h3 id="参考文档">参考文档</h3>

<p><a href="https://jekyllrb.com/docs/structure/">Jekyll 文档</a></p>

<p><a href="https://www.ruby-lang.org/en/documentation/">Ruby 文档</a></p>

<p><a href="http://www.msys2.org/">MSYS2 官网</a></p>

<p><a href="https://rubygems.org/pages/download">RubyGems 官网</a></p>

<p><a href="https://pages.github.com/versions/">GitHub Pages 依赖版本说明</a></p>

<p><a href="http://jekyllthemes.org/">Jekyll 主题模板收录</a></p>


    <ul class="tag">
  <li class="tag__item"><strong>Tags: </strong></li>
  
    <li class="tag__item"><a href="https://honghzh.github.io/tag/Guidance" title="Guidance">#Guidance</a></li>
  
</ul>
  </div>

</article>


<div class="pagination">
  
    <a href="/guidance/github-pages/github-pages-guidance01" class="pagination__previous">
        <svg class="pagination__icon" data-icon="chevronLeft" viewBox="0 0 32 32" style="fill:currentcolor">
          <title>chevronLeft icon</title>
          <path d="M20 1 L24 5 L14 16 L24 27 L20 31 L6 16 z"></path>
        </svg>
      <span class="pagination__previous-text">Previous</span>
    </a>
  
  
    <span class="pagination__next--edge">
      <span class="pagination__next-text">Next</span>
    </span>
  
</div>

<div class="related-posts">
  <h3>Related Posts</h3>

  <ul>
    
      <li>
        <a href="/guidance/github-pages/github-pages-guidance01">
          指南 | Windows 下使用 GitHub Pages 搭建个人博客
        </a>
      </li>
    
      <li>
        <a href="/abc/github-pages/git-and-github-pages-abc">
          入门 | Git 、GitHub 与 GitHub Pages 原理的生动介绍
        </a>
      </li>
    
  </ul>
</div>




      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Honghzh</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>My Email</li>
          <li><a href="mailto:honghz29@foxmail.com">honghz29@foxmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/honghzh"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">honghzh</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>有可能是超认真教程，也有可能是有点杂乱的随笔。</p>
        <p> </p>
      </div>

      <!-- <section style="font-size: 10px; padding-left: 15px;">GitHub Pages &copy; 2018 <a href="">Honghzh</a></section> -->

    </div>

  </div>

</footer>


  </body>

</html>
